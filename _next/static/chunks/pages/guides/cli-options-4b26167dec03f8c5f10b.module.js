(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{E3FS:function(e,a,n){"use strict";n.r(a),n.d(a,"meta",(function(){return b})),n.d(a,"default",(function(){return m}));var t=n("wx14"),i=n("Ff2n"),o=n("q1tI"),r=n.n(o),l=n("7ljp"),c=n("er9C"),b=(r.a.createElement,{id:"cli-options",title:"Command-line Options"}),s={meta:b},p=e=>{var{children:a}=e,n=Object(i.a)(e,["children"]);return Object(l.b)(c.a,Object(t.a)({meta:b},n),a)};function m(e){var{components:a}=e,n=Object(i.a)(e,["components"]);return Object(l.b)(p,Object(t.a)({},s,n,{components:a,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Monika can be run with the single command ",Object(l.b)("inlineCode",{parentName:"p"},"monika")," typed into the command shell. However to fully enjoy its flexibility, there are several options and arguments that can be used."),Object(l.b)("p",null,"The common ",Object(l.b)("inlineCode",{parentName:"p"},"-h")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--help")," displays all available options"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -h\n")),Object(l.b)("h2",{id:"configuration"},"Configuration",Object(l.b)("a",{parentName:"h2",href:"#configuration",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Monika by default will look for the ",Object(l.b)("inlineCode",{parentName:"p"},"monika.yml")," config file.\nYou may want to store different configurations for different environments or projects. This is straight forward by using the ",Object(l.b)("inlineCode",{parentName:"p"},"-c")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--config")," flag followed by the filename."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --config staging-set.yml\n")),Object(l.b)("p",null,"Configuration files may be placed remotely which you can specify using the same flag and using a URI."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -c https://raw.githubusercontent.com/hyperjumptech/monika/main/config_sample/config.desktop.example.yml\n")),Object(l.b)("p",null,"A neat feature is that the configuration file is watched and any changes will cause Monika to reload."),Object(l.b)("h3",{id:"multiple-configurations"},"Multiple configurations",Object(l.b)("a",{parentName:"h3",href:"#multiple-configurations",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Monika also supports multiple sources of configuration at the same time.\n",Object(l.b)("strong",{parentName:"p"},"Any top-level")," keys from the first argument will be overridden by the later source(s)."),Object(l.b)("p",null,"For example, assuming you have a file named ",Object(l.b)("inlineCode",{parentName:"p"},"only-notif.json")," whose content ",Object(l.b)("inlineCode",{parentName:"p"},'{"notifications":[<your-notifications-here>]}')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"# only-notif.json's notifications will override notifications foo-monitoring.json has\nmonika -c foo-monitoring.json only-notif.json\n")),Object(l.b)("h2",{id:"create-config"},"Create Config",Object(l.b)("a",{parentName:"h2",href:"#create-config",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Just starting out? Want to make a new configuration? The ",Object(l.b)("inlineCode",{parentName:"p"},"--create-config")," flag will spin up an easy Web based configuration file generator."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --create-config\n")),Object(l.b)("p",null,"As an alternative, the generator is able to read HAR or postman files as input to convert into monika.yml configuration files."),Object(l.b)("p",null,"Use the ",Object(l.b)("inlineCode",{parentName:"p"},"--har")," or the ",Object(l.b)("inlineCode",{parentName:"p"},"--postman")," in combination with ",Object(l.b)("inlineCode",{parentName:"p"},"--create-config")," on the command line to convert those files."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --create-config --har myfile.har\n")),Object(l.b)("p",null,"The above example creates a config file from an existing HAR archive. Auto generated files defaults to 'monika.yml'. Use the ",Object(l.b)("inlineCode",{parentName:"p"},"-o")," output flag to specify another name."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --create-config --postman mypostman.json -o new-monika.yml\n")),Object(l.b)("p",null,"When generating config files, if an existing monika.yml file already exist, the user is prompted before overwriting. To bypass the user prompt, use the ",Object(l.b)("inlineCode",{parentName:"p"},"--force")," flag."),Object(l.b)("h2",{id:"force"},"Force",Object(l.b)("a",{parentName:"h2",href:"#force",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"The ",Object(l.b)("inlineCode",{parentName:"p"},"--force")," flag forces the execution of a command. The force flag will bypass any user prompts with an affirmative. If a Yes/No prompt is normally presented, ",Object(l.b)("inlineCode",{parentName:"p"},"--force")," will bypass the prompt and assume a Yes."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --flush --force\n")),Object(l.b)("p",null,"The example above flushes the database bypassing without waiting for user confirmation."),Object(l.b)("h2",{id:"har"},"HAR",Object(l.b)("a",{parentName:"h2",href:"#har",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Monika supports HAR files as input. HAR are JSON formatted HTTP ARchive file. Follow ",Object(l.b)("a",{parentName:"p",href:"https://medium.com/hyperjump-tech/generate-your-monika-configuration-using-http-archive-har-764944cbb9e6"},"these steps")," to generate your own HAR file from the site you've visited then use Monika to refetch the pages and ensure they still work."),Object(l.b)("p",null,"You use the ",Object(l.b)("inlineCode",{parentName:"p"},"-H")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--har")," to specify a HAR file."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -H my-file.har\n")),Object(l.b)("h3",{id:"create-config-from-har-file"},"Create config from HAR file",Object(l.b)("a",{parentName:"h3",href:"#create-config-from-har-file",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"You can use the combination of ",Object(l.b)("inlineCode",{parentName:"p"},"--create-config")," and ",Object(l.b)("inlineCode",{parentName:"p"},"--har")," flags to convert the HAR archive into to a monika.yml configuration file."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"# default to monika.json\nmonika --create-config -H my-file.har\n")),Object(l.b)("h3",{id:"merge-har-file-to-existing-configurations"},"Merge HAR file to existing configurations",Object(l.b)("a",{parentName:"h3",href:"#merge-har-file-to-existing-configurations",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"You can also use ",Object(l.b)("inlineCode",{parentName:"p"},"-c/--config")," to merge properties with them. Note that using ",Object(l.b)("inlineCode",{parentName:"p"},"--har")," will override probes passed to ",Object(l.b)("inlineCode",{parentName:"p"},"-c/--config"),"."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --config monika-notifications.json -H my-file.har\n")),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"P.S."),": HAR files may contain sensitive information, use caution when distributing HAR filles."),Object(l.b)("h2",{id:"id"},"Id",Object(l.b)("a",{parentName:"h2",href:"#id",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"By default Monika loops through all the probe configuration in order they are entered. However, you can specify any run order you want using the ",Object(l.b)("inlineCode",{parentName:"p"},"-i")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--id")," flags."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -i 1,3,1,2,4,5,7,7\n")),Object(l.b)("p",null,"The above example will run probe id 1, 3, 1, 2, 4, 5, 7, 7 in that order just once. All id must be valid ids on the configuration file. You can combine the ",Object(l.b)("inlineCode",{parentName:"p"},"--id")," flag with the ",Object(l.b)("inlineCode",{parentName:"p"},"-r")," repeat flag to continuously repeat the specific ids."),Object(l.b)("h2",{id:"logging"},"Logging",Object(l.b)("a",{parentName:"h2",href:"#logging",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Monika stores requests and responses data in an internal log file. By default, it only stores data when incident or recovery happens. You may choose to store all requests using ",Object(l.b)("inlineCode",{parentName:"p"},"--keep-verbose-logs")," flag."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --keep-verbose-logs\n")),Object(l.b)("p",null,"To dump (display) all the logs, use the ",Object(l.b)("inlineCode",{parentName:"p"},"-l")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--logs")," flag."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --logs\n")),Object(l.b)("p",null,"You can flush the log history with the ",Object(l.b)("inlineCode",{parentName:"p"},"--flush")," option. there is no ",Object(l.b)("inlineCode",{parentName:"p"},"-f")," short flag for this command."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --flush\n")),Object(l.b)("p",null,"You must respond with a capital ",Object(l.b)("inlineCode",{parentName:"p"},'"Y"')," to confirm if you want to flush the logs or use the ",Object(l.b)("inlineCode",{parentName:"p"},"--force")," flag to force a Yes without prompting."),Object(l.b)("h2",{id:"postman"},"Postman",Object(l.b)("a",{parentName:"h2",href:"#postman",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Have an existing request on postman you want to automate? Monika supports reading postman.json as configuration input. Use the ",Object(l.b)("inlineCode",{parentName:"p"},"-p")," or the ",Object(l.b)("inlineCode",{parentName:"p"},"--postman")," switches."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -p postman.json\n")),Object(l.b)("h3",{id:"create-config-from-postman-file"},"Create config from Postman file",Object(l.b)("a",{parentName:"h3",href:"#create-config-from-postman-file",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"You can use the combination of ",Object(l.b)("inlineCode",{parentName:"p"},"--create-config")," and ",Object(l.b)("inlineCode",{parentName:"p"},"--postman")," flags to convert the postman files to a monika.yml config file."),Object(l.b)("h3",{id:"merge-postman-file-to-existing-configurations"},"Merge Postman file to existing configurations",Object(l.b)("a",{parentName:"h3",href:"#merge-postman-file-to-existing-configurations",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"You can also use ",Object(l.b)("inlineCode",{parentName:"p"},"-c/--config")," to merge properties with them. Note that using ",Object(l.b)("inlineCode",{parentName:"p"},"--postman")," will override probes passed to ",Object(l.b)("inlineCode",{parentName:"p"},"-c/--config"),"."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --config monika-notifications.json --postman my-file.har\n")),Object(l.b)("h2",{id:"prometheus"},"Prometheus",Object(l.b)("a",{parentName:"h2",href:"#prometheus",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"You can expose the ",Object(l.b)("a",{parentName:"p",href:"https://prometheus.io/"},"Prometheus")," metrics server with the ",Object(l.b)("inlineCode",{parentName:"p"},"--prometheus")," flag and server port as a value."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --prometheus 3001\n")),Object(l.b)("p",null,"Then you can scrape the metrics from ",Object(l.b)("inlineCode",{parentName:"p"},"http://localhost:3001/metrics"),"."),Object(l.b)("h3",{id:"available-metrics"},"Available Metrics",Object(l.b)("a",{parentName:"h3",href:"#available-metrics",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Monika exposes ",Object(l.b)("a",{parentName:"p",href:"https://prometheus.io/docs/instrumenting/writing_clientlibs/#standard-and-runtime-collectors"},"Prometheus default metrics"),", ",Object(l.b)("a",{parentName:"p",href:"https://github.com/siimon/prom-client/tree/master/lib/metrics"},"Node.js specific metrics"),", and Monika probe metrics below."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Metric Name"),Object(l.b)("th",{parentName:"tr",align:null},"Type"),Object(l.b)("th",{parentName:"tr",align:null},"Purpose"),Object(l.b)("th",{parentName:"tr",align:null},"Label"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"monika_probes_total")),Object(l.b)("td",{parentName:"tr",align:null},"Gauge"),Object(l.b)("td",{parentName:"tr",align:null},"Collect total probe"),Object(l.b)("td",{parentName:"tr",align:null},"-")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"monika_request_status_code_info")),Object(l.b)("td",{parentName:"tr",align:null},"Gauge"),Object(l.b)("td",{parentName:"tr",align:null},"Collect HTTP status code"),Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"id"),", ",Object(l.b)("inlineCode",{parentName:"td"},"name"),", ",Object(l.b)("inlineCode",{parentName:"td"},"url"),", ",Object(l.b)("inlineCode",{parentName:"td"},"method"))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"monika_request_response_time_seconds")),Object(l.b)("td",{parentName:"tr",align:null},"Histogram"),Object(l.b)("td",{parentName:"tr",align:null},"Collect duration of probe request in seconds"),Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"id"),", ",Object(l.b)("inlineCode",{parentName:"td"},"name"),", ",Object(l.b)("inlineCode",{parentName:"td"},"url"),", ",Object(l.b)("inlineCode",{parentName:"td"},"method"),", ",Object(l.b)("inlineCode",{parentName:"td"},"statusCode"))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"monika_request_response_size_bytes")),Object(l.b)("td",{parentName:"tr",align:null},"Gauge"),Object(l.b)("td",{parentName:"tr",align:null},"Collect size of response size in bytes"),Object(l.b)("td",{parentName:"tr",align:null},Object(l.b)("inlineCode",{parentName:"td"},"id"),", ",Object(l.b)("inlineCode",{parentName:"td"},"name"),", ",Object(l.b)("inlineCode",{parentName:"td"},"url"),", ",Object(l.b)("inlineCode",{parentName:"td"},"method"),", ",Object(l.b)("inlineCode",{parentName:"td"},"statusCode"))))),Object(l.b)("h2",{id:"repeat"},"Repeat",Object(l.b)("a",{parentName:"h2",href:"#repeat",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"By default monika will continuously loop through all your probes in the configuration. You can specify the number of repeats using ",Object(l.b)("inlineCode",{parentName:"p"},"-r")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--repeat")," flags followed by a number. For example to repeat only 3 times type the command below:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -r 3\n")),Object(l.b)("p",null,"You can combine this flag with the ",Object(l.b)("inlineCode",{parentName:"p"},"--id")," flag to repeat custom sequences."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -r 3 -i 1,3,1\n")),Object(l.b)("h2",{id:"stun"},"STUN",Object(l.b)("a",{parentName:"h2",href:"#stun",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"By default monika will continuously checking the ",Object(l.b)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/STUN"},"STUN")," server in 20 seconds interval. You can specify the number of interval using ",Object(l.b)("inlineCode",{parentName:"p"},"-s")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--stun")," flags followed by a number in seconds. For example to set the interval to 10 seconds type the command below:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -s 10\n")),Object(l.b)("p",null,"If the number is zero or less, monika will check the STUN server just once, not repeteadly, to get public IP."),Object(l.b)("h2",{id:"summary"},"Summary",Object(l.b)("a",{parentName:"h2",href:"#summary",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"While Monika is running, you can fetch the running statistics by using the ",Object(l.b)("inlineCode",{parentName:"p"},"--summary")," flag from another terminal."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --summary\n")),Object(l.b)("p",null,"Please note that you need to run the above command from the same working directory as the running monika you want to see/check.\nThe '--summary' flag also does not when no other monika process is running."),Object(l.b)("h2",{id:"verbose"},"Verbose",Object(l.b)("a",{parentName:"h2",href:"#verbose",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"Like your app to be more chatty and honest revealing all its internal details? Use the ",Object(l.b)("inlineCode",{parentName:"p"},"--verbose")," flag."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika --verbose\n")),Object(l.b)("h2",{id:"version"},"Version",Object(l.b)("a",{parentName:"h2",href:"#version",title:"Direct link to heading",className:"anchor"},Object(l.b)("span",{parentName:"a",className:"icon icon-link"}))),Object(l.b)("p",null,"The ",Object(l.b)("inlineCode",{parentName:"p"},"-v")," or ",Object(l.b)("inlineCode",{parentName:"p"},"--version")," flag prints current application version."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"monika -v\n")))}m.isMDXComponent=!0},XaKD:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/cli-options",function(){return n("E3FS")}])}},[["XaKD",0,1,2,3,4]]]);